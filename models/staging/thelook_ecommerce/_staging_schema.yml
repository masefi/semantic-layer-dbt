version: 2

models:
  - name: stg_orders
    description: Cleaned staging model for ecommerce orders
    columns:
      - name: order_id
        description: Primary key for orders
        tests:
          - not_null
          - unique
      - name: user_id
        description: Foreign key to users
        tests:
          - not_null
      - name: status
        description: Order status
        tests:
          - accepted_values:
              values: ['Shipped', 'Complete', 'Returned', 'Cancelled', 'Processing']
      - name: created_at
        description: Order creation timestamp
      - name: item_count
        description: Number of items in the order

  - name: stg_order_items
    description: Cleaned staging model for order line items
    columns:
      - name: order_item_id
        description: Primary key for order items
        tests:
          - not_null
          - unique
      - name: order_id
        description: Foreign key to orders
        tests:
          - not_null
          - relationships:
              to: ref('stg_orders')
              field: order_id
      - name: user_id
        description: Foreign key to users
        tests:
          - not_null
      - name: product_id
        description: Foreign key to products
        tests:
          - not_null
      - name: sale_price
        description: Sale price of the item
        tests:
          - not_null

  - name: stg_users
    description: Cleaned staging model for users
    columns:
      - name: user_id
        description: Primary key for users
        tests:
          - not_null
          - unique
      - name: email
        description: User email address
      - name: country
        description: User country
      - name: created_at
        description: Account creation timestamp

  - name: stg_products
    description: Cleaned staging model for products
    columns:
      - name: product_id
        description: Primary key for products
        tests:
          - not_null
          - unique
      - name: product_name
        description: Product name
      - name: brand
        description: Product brand
      - name: category
        description: Product category
      - name: retail_price
        description: Retail price

  - name: stg_events
    description: Web events from users
    columns:
      - name: event_id
        tests:
          - unique
          - not_null
      - name: user_id
        tests:
          - not_null

  - name: stg_inventory_items
    description: Inventory tracking
    columns:
      - name: inventory_item_id
        tests:
          - unique
          - not_null

  - name: stg_distribution_centers
    description: Distribution center locations
    columns:
      - name: distribution_center_id
        tests:
          - unique
          - not_null
